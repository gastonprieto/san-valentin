<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para mi amor â¤ï¸</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body {
            margin: 0; padding: 0; display: flex; justify-content: center; align-items: center;
            height: 100vh; background-color: #ffe5ec; font-family: 'Comic Sans MS', sans-serif;
            overflow: hidden;
        }
        .card {
            background: white; padding: 30px; border-radius: 30px;
            box-shadow: 0 15px 35px rgba(255, 77, 109, 0.3);
            text-align: center; max-width: 400px; width: 85%; position: relative;
        }
        h1 { color: #ff0a54; font-size: 1.5rem; }
        .gif-box { 
            width: 100%; height: 200px; margin: 15px 0; 
            display: flex; justify-content: center; align-items: center;
            background-color: #fffafb; border-radius: 20px;
            font-size: 4rem; /* Por si falla la imagen, se ve un emoji grande */
        }
        .gif-box img { max-height: 100%; border-radius: 15px; }
        #frase { color: #ff477e; font-weight: bold; min-height: 50px; font-size: 1.3rem; }
        
        .btn-group { display: flex; justify-content: center; align-items: center; gap: 15px; min-height: 80px; }
        #btn-si {
            background-color: #ff0a54; color: white; border: none; padding: 15px 30px;
            font-size: 1.4rem; font-weight: bold; border-radius: 50px; cursor: pointer;
            box-shadow: 0 8px 15px rgba(255, 10, 84, 0.3); animation: latido 1.2s infinite;
        }
        @keyframes latido { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        
        #btn-no { background-color: #acb1b6; color: white; border: none; padding: 10px 20px; border-radius: 50px; cursor: pointer; }
        
        .hidden { display: none !important; }
        #regalo-btn { font-size: 5rem; cursor: pointer; animation: bounce 1s infinite; display: block; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
    </style>
</head>
<body>

    <!-- PASO 1: PREGUNTA -->
    <div class="card" id="paso1">
        <h1>Â¿Quieres seguir saliendo conmigo? ğŸ¥º</h1>
        <p id="frase">Â¡Dime que sÃ­! â¤ï¸</p>
        <div class="gif-box" id="box1">
            <img id="img1" src="img/1.gif" onerror="this.style.display='none'; document.getElementById('box1').innerHTML='ğŸ¼'">
        </div>
        <div class="btn-group">
            <button id="btn-si">Â¡SÃ! â¤ï¸</button>
            <button id="btn-no">No</button>
        </div>
    </div>

    <!-- PASO 2: EL REGALO -->
    <div class="card hidden" id="paso2">
        <h1>Â¡SABÃA QUE DIRÃAS QUE SÃ! ğŸ˜</h1>
        <p>Tengo algo para ti... Â¡Toca el regalo!</p>
        <div class="gif-box">
            <span id="regalo-btn">ğŸ</span>
        </div>
    </div>

    <!-- PASO 3: BESOS FINALES -->
    <div class="card hidden" id="paso3">
        <h1 style="color: #ff0a54;">Â¡TE AMO MUCHO MI AMOR! â¤ï¸</h1>
        <div class="gif-box" id="box3">
            <img id="img3" src="img/besos.gif" onerror="this.style.display='none'; document.getElementById('box3').innerHTML='ğŸ’‹'">
        </div>
        <p style="font-size: 1.3rem; color: #ff0a54; font-weight: bold;">
            Â¡Te doy mil millones de besos! ğŸ’‹âœ¨
        </p>
    </div>

    <script>
        const btnNo = document.getElementById('btn-no');
        const btnSi = document.getElementById('btn-si');
        const img1 = document.getElementById('img1');
        const frase = document.getElementById('frase');
        const regalo = document.getElementById('regalo-btn');

        const frases = [
            "Â¿Segura? PiÃ©nsalo bien... ğŸ¥º",
            "Â¡Bubu se pondrÃ¡ muy triste! ğŸ˜­",
            "Â¡Dudu tiene muchos besos para ti! ğŸ¼",
            "Â¡No me dejes solito! ğŸ¥º",
            "Â¡Te comprarÃ© un helado! ğŸ¦",
            "Â¡Iremos a ver pelis! ğŸ¿",
            "Â¿Ni un poquito de amor? ğŸ’”",
            "Â¡Mira mi carita! ğŸ¥º",
            "Â¡Te voy a extraÃ±ar mucho! ğŸ˜­",
            "Â¡No acepto un NO! ğŸ˜¤",
            "Â¡Te prometo mil abrazos! ğŸ¤—",
            "Â¡Eres mi personita favorita! âœ¨",
            "Â¡Dudu y Bubu estÃ¡n llorando! ğŸ˜­",
            "Â¡HabrÃ¡ muchas sorpresas! ğŸ",
            "Â¡Andale, por favor! â¤ï¸",
            "Â¡Te amo infinitamente! ğŸ’–",
            "Â¡Ya casi le das al sÃ­! ğŸ˜"
        ];

        // ImÃ¡genes locales desde la carpeta img - una por cada frase
        const gifs = [];
        for (let j = 1; j <= frases.length; j++) {
            gifs.push(`img/${j}.gif`);
        }

        let i = 0;
        let siSize = 1.4;

        // FunciÃ³n para cargar imagen con fallback a la primera
        function cargarImagen(indice) {
            const imagenIndex = indice % frases.length;
            const rutaImagen = gifs[imagenIndex];
            const primeraImagen = gifs[0];
            
            img1.onerror = function() {
                // Si falla, usar la primera imagen
                if (rutaImagen !== primeraImagen) {
                    img1.src = primeraImagen;
                } else {
                    img1.style.display = 'none';
                    document.getElementById('box1').innerHTML = 'ğŸ¼';
                }
            };
            
            img1.src = rutaImagen;
            img1.style.display = 'block';
        }

        function moverNo() {
            // Cambiar frase
            const fraseIndex = i % frases.length;
            frase.innerText = frases[fraseIndex];
            
            // Cambiar GIF - una imagen por cada frase
            cargarImagen(fraseIndex);

            i++;
            siSize += 0.2;
            btnSi.style.fontSize = siSize + "rem";

            // Si llegamos a la Ãºltima frase, ocultar el botÃ³n "No"
            if (fraseIndex === frases.length - 1) {
                btnNo.style.display = 'none';
            } else {
                // Mover el botÃ³n solo si no es la Ãºltima frase
                btnNo.style.position = "fixed";
                const x = Math.random() * (window.innerWidth - btnNo.offsetWidth);
                const y = Math.random() * (window.innerHeight - btnNo.offsetHeight);
                btnNo.style.left = x + "px";
                btnNo.style.top = y + "px";
            }
        }

        btnNo.addEventListener('mouseover', moverNo);
        btnNo.addEventListener('touchstart', (e) => { e.preventDefault(); moverNo(); });

        btnSi.addEventListener('click', () => {
            document.getElementById('paso1').classList.add('hidden');
            document.getElementById('paso2').classList.remove('hidden');
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        });

        regalo.addEventListener('click', () => {
            document.getElementById('paso2').classList.add('hidden');
            document.getElementById('paso3').classList.remove('hidden');
            
            // Lluvia de corazones
            setInterval(() => {
                confetti({
                    particleCount: 7, angle: 60, spread: 55, origin: { x: 0 },
                    colors: ['#ff0a54', '#ff477e']
                });
                confetti({
                    particleCount: 7, angle: 120, spread: 55, origin: { x: 1 },
                    colors: ['#ff0a54', '#ff477e']
                });
            }, 400);
        });
    </script>
</body>
</html>